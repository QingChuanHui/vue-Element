webpackJsonp([15],{QkUe:function(e,t,l){"use strict";t.d=function(e){return r.a.fetchPost("/v1/integralTask/selectList",e)},t.c=function(e){return r.a.fetchPost("/v1/integralTask/select",e)},t.e=function(e){return r.a.fetchPost("/v1/integralTask/insert",e)},t.f=function(e){return r.a.fetchPost("/v1/integralTask/update",e)},t.b=function(e){return r.a.fetchPost("/v1/integralTask/delete",e)},t.a=function(e){return r.a.fetchPost("/v1/integralTask/taskNameUniqueness",e)};var r=l("vLgD")},zq7f:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l("gBtx"),a=l.n(r),s=l("QkUe"),n={data:function(){var e=this;return{cityFlag:"",flag:"",id:"",model:{type:"0"},rules:{integralName:[{required:!0,trigger:"blur",validator:function(t,l,r){""===l&&r(new Error("请输入任务名称")),Object(s.a)({taskName:l,flag:e.cityFlag}).then(function(e){e.new?r(new Error("任务名称已存在")):r()})}}],integralValue:[{required:!0,message:"请选输入分值",trigger:"blur"}]}}},created:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.load()),this.flag=a()(this.$route.query.flag),"1"===this.$route.query.flag?this.cityFlag=!1:"2"===this.$route.query.flag&&(this.cityFlag=!0)},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.id?Object(s.f)(t.model).then(function(e){t.$message({message:"恭喜你，修改成功",type:"success"}),t.$router.push({path:"IntegralTask"})}):Object(s.e)(t.model).then(function(e){t.$message({message:"恭喜你，添加成功",type:"success"}),t.$router.push({path:"IntegralTask"})})})},resetForm:function(e){this.$refs[e].resetFields()},load:function(){var e=this;Object(s.c)({id:this.id}).then(function(t){e.model=t.new})}}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-row",[l("el-col",{attrs:{span:23}},[l("el-form",{ref:"model",staticClass:"demo-model",attrs:{model:e.model,rules:e.rules,"label-width":"100px",size:"mini"}},[l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"任务名称",prop:"integralName"}},[l("el-input",{model:{value:e.model.integralName,callback:function(t){e.$set(e.model,"integralName",t)},expression:"model.integralName"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{prop:"type",label:"类型"}},[l("el-radio-group",{attrs:{size:"small"},model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},[l("el-radio-button",{attrs:{label:"0"}},[e._v("直接奖励积分")]),e._v(" "),l("el-radio-button",{attrs:{label:"1"}},[e._v("按单位奖励积分")])],1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"0"===e.model.type?"积分数":"单位数",prop:"integralValue"}},[l("el-input",{model:{value:e.model.integralValue,callback:function(t){e.$set(e.model,"integralValue",t)},expression:"model.integralValue"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.model.remarks,callback:function(t){e.$set(e.model,"remarks",t)},expression:"model.remarks"}})],1)],1)],1),e._v(" "),0!=e.flag?l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("model")}}},[e._v("提交")]),e._v(" "),l("el-button",{on:{click:function(t){e.resetForm("model")}}},[e._v("重置")])],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]},i=l("VU/8")(n,o,!1,null,null,null);t.default=i.exports}});