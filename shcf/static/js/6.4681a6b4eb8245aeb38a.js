webpackJsonp([6],{"3C4X":function(e,t,l){var a=l("GbjO");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l("rjj0")("efdd9cfa",a,!0)},GbjO:function(e,t,l){(e.exports=l("FZ+f")(!1)).push([e.i,"\n.eidtCarousel .line {\n  text-align: center;\n}\n.eidtCarousel .disabled .el-upload--picture-card {\n  display: none;\n}\n",""])},i1kU:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("gBtx"),s=l.n(a),i=l("kBuu"),o=l("y/rj"),r={data:function(){return{flag:"",imagelist:[],action:"http://101.231.89.126:8300/v1/upload",picUrl:"http://101.231.89.126:8300",id:"",model:{},rules:{name:[{required:!0,message:"请输入轮播图名称",trigger:"change"},{min:0,max:20,message:"最大 20个字符",trigger:"change"}],imgPath:[{required:!0,message:"请选择图片",trigger:"change"}]},dialogImageUrl:"",dialogVisible:!1,areaList:[],selectAreaList:[]}},created:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.load()),this.flag=s()(this.$route.query.flag),this.handleArea()},computed:{uploadDisabled:function(){return this.imagelist.length>0}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.model.areaId||(t.model.areaId="all"),t.id?Object(i.e)(t.model).then(function(e){t.$message({message:"恭喜你，修改成功",type:"success"}),t.$router.push({path:"Carousel"})}):Object(i.d)(t.model).then(function(e){t.$message({message:"恭喜你，添加成功",type:"success"}),t.$router.push({path:"Carousel"})})})},resetForm:function(e){this.$refs[e].resetFields()},load:function(){var e=this;Object(i.b)({id:this.id}).then(function(t){e.model=t.carousel,e.model.imgPath&&e.imagelist.push({url:e.picUrl+e.model.imgPath}),""!==e.model.areaId&&"all"!==e.model.areaId&&(e.selectAreaList=e.model.areaId.split(","))})},beforeUpload:function(e){console.log("beforeupload")},onSuccess:function(e,t,l){console.log("success"),this.model.imgPath=e.url,this.imagelist.push(t)},handleRemove:function(e,t){console.log("remove"),this.imagelist=[]},handlePictureCardPreview:function(e){console.log("preview"),this.dialogImageUrl=e.url,this.dialogVisible=!0},handleArea:function(){var e=this;Object(o.d)({pageNo:0,pageSize:1e3}).then(function(t){e.areaList=t.page.records})},setAreaId:function(e){this.model.areaId=this.selectAreaList.join(",")}}},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-row",{staticClass:"eidtCarousel"},[l("el-col",{attrs:{span:23}},[l("el-form",{ref:"model",staticClass:"demo-ruleForm",attrs:{model:e.model,rules:e.rules,"label-width":"100px",size:"mini"}},[l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"名称",prop:"name"}},[l("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"区域"}},[l("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.selectAreaList,callback:function(t){e.selectAreaList=t},expression:"selectAreaList"}},e._l(e.areaList,function(t){return l("el-option",{key:t.city,attrs:{label:t.city,value:t.id,blur:e.setAreaId()}})}))],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"图片",prop:"imgPath"}},[l("el-upload",{class:{disabled:e.uploadDisabled},attrs:{action:e.action,limit:1,"before-upload":e.beforeUpload,"on-success":e.onSuccess,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,multiple:!1,accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg","file-list":e.imagelist}},[l("i",{staticClass:"el-icon-plus"})]),e._v(" "),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"链接"}},[l("el-input",{model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"显示状态"}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.isShow,callback:function(t){e.$set(e.model,"isShow",t)},expression:"model.isShow"}})],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:4}},[l("el-form-item",{attrs:{label:"排序"}},[l("el-input",{model:{value:e.model.sortId,callback:function(t){e.$set(e.model,"sortId",t)},expression:"model.sortId"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.model.remarks,callback:function(t){e.$set(e.model,"remarks",t)},expression:"model.remarks"}})],1)],1)],1),e._v(" "),0!=e.flag?l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("model")}}},[e._v("提交")]),e._v(" "),l("el-button",{on:{click:function(t){e.resetForm("model")}}},[e._v("重置")])],1):e._e()],1)],1)],1)},staticRenderFns:[]};var c=l("VU/8")(r,n,!1,function(e){l("3C4X")},null,null);t.default=c.exports},kBuu:function(e,t,l){"use strict";t.c=function(e){return a.a.fetchPost("/v1/carousel/selectList",e)},t.b=function(e){return a.a.fetchPost("/v1/carousel/select",e)},t.d=function(e){return a.a.fetchPost("/v1/carousel/insert",e)},t.e=function(e){return a.a.fetchPost("/v1/carousel/update",e)},t.a=function(e){return a.a.fetchPost("/v1/carousel/delete",e)};var a=l("vLgD")}});