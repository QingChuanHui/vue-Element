webpackJsonp([12],{NqAa:function(e,l,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.useradd .line {\n  text-align: center;\n}\n.useradd .disabled .el-upload--picture-card {\n  display: none;\n}\n",""])},WrKD:function(e,l,r){var t=r("NqAa");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("799b757c",t,!0)},qmc6:function(e,l,r){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t=r("gBtx"),o=r.n(t),a=r("jdCd"),s={components:{officeSelector:r("8+ep").a},computed:{uploadDisabled:function(){return this.imagelist.length>0}},data:function(){var e=this;return{dialogVisible:!1,dialogImageUrl:"",imagelist:[],action:"http://101.231.89.126:8300/v1/upload",picUrl:"http://101.231.89.126:8300",model:{},sexList:[{value:"男",label:"男"},{value:"女",label:"女"}],flagUpdate:!1,id:"",flag:0,userUpd:"",ruleForm:{id:"",name:"",password:"",loginName:"",sex:"",mobile:"",headImage:"",officeName:"",remarks:"",useFlag:0,officeId:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:0,max:20,message:"最大 64个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:0,max:20,message:"最大 64个字符",trigger:"blur"}],loginName:[{validator:function(l,r,t){""===r&&t(new Error("请输入登录编码")),2===e.flag&&(e.flagUpdate=!0),Object(a.g)({loginName:r,flag:e.flagUpdate}).then(function(e){e.new?t(new Error("该账号已经被使用")):t()})},trigger:"blur"}]}}},mounted:function(){this.$nextTick(function(){this.userUpd=this.$route.query.userUpd,this.id=this.$route.query.id,this.id&&this.load(),this.flag=o()(this.$route.query.flag)})},methods:{submitForm:function(e){var l=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;1===l.flag?Object(a.h)(l.ruleForm).then(function(e){console.log("ok"),l.$router.push({path:"/system/User"})}):2===l.flag?Object(a.m)(l.ruleForm).then(function(e){console.log("ok"),l.$router.push({path:"/system/User"})}):console.log("error submit!!:"+l.flag)})},resetForm:function(e){this.$refs[e].resetFields()},load:function(){var e=this;Object(a.k)({id:this.id}).then(function(l){e.ruleForm=l.new,e.ruleForm.headImage&&e.imagelist.push({url:e.picUrl+e.ruleForm.headImage})})},selectOffice:function(e){e.treeKey&&(this.ruleForm.officeId=e.treeKey,this.ruleForm.officeName=e.treeValue)},beforeUpload:function(e){console.log("beforeupload")},onSuccess:function(e,l,r){console.log("success"),console.log(e),this.ruleForm.headImage=e.url,this.imagelist.push(l)},handleRemove:function(e,l){console.log("remove"),this.imagelist=[]},handlePictureCardPreview:function(e){console.log("preview"),this.dialogImageUrl=e.url,this.dialogVisible=!0}}},i={render:function(){var e=this,l=e.$createElement,r=e._self._c||l;return r("div",{staticClass:"useradd"},[r("el-row",[r("el-col",{attrs:{span:23}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"mini"}},[e.userUpd?e._e():r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"机构名称",prop:"officeName"}},[r("officeSelector",{attrs:{officeName:e.ruleForm.officeName},on:{selectSuccess:e.selectOffice}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"头像",prop:"headImage"}},[r("el-upload",{class:{disabled:e.uploadDisabled},attrs:{action:e.action,limit:1,"before-upload":e.beforeUpload,"on-success":e.onSuccess,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,multiple:!1,accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg","file-list":e.imagelist}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(l){e.dialogVisible=l}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(l){e.$set(e.ruleForm,"name",l)},expression:"ruleForm.name"}})],1)],1)],1),e._v(" "),e.userUpd?e._e():r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"登录编码",prop:"loginName"}},[r("el-input",{model:{value:e.ruleForm.loginName,callback:function(l){e.$set(e.ruleForm,"loginName",l)},expression:"ruleForm.loginName"}})],1)],1)],1),e._v(" "),e.userUpd?e._e():r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.ruleForm.password,callback:function(l){e.$set(e.ruleForm,"password",l)},expression:"ruleForm.password"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"address",label:"性别"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.sex,callback:function(l){e.$set(e.ruleForm,"sex",l)},expression:"ruleForm.sex"}},e._l(e.sexList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"adminName",label:"手机号"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(l){e.$set(e.ruleForm,"mobile",l)},expression:"ruleForm.mobile"}})],1)],1)],1),e._v(" "),e.userUpd?e._e():r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"禁用"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.useFlag,callback:function(l){e.$set(e.ruleForm,"useFlag",l)},expression:"ruleForm.useFlag"}})],1)],1)],1),e._v(" "),e.userUpd?e._e():r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(l){e.$set(e.ruleForm,"remarks",l)},expression:"ruleForm.remarks"}})],1)],1)],1),e._v(" "),0!=e.flag?r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(l){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(l){e.resetForm("ruleForm")}}},[e._v("重置")])],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")(s,i,!1,function(e){r("WrKD")},null,null);l.default=n.exports}});