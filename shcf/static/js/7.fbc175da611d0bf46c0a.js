webpackJsonp([7],{"4hyN":function(e,t,r){"use strict";t.b=function(e){return l.a.fetchPost("/v1/client/selectList",e)},t.f=function(e){return l.a.fetchPost("/v1/client/update",e)},t.a=function(e){return l.a.fetchPost("/v1/client/delete",e)},t.c=function(e){return l.a.fetchPost("/v1/client/insert",e)},t.e=function(e){return l.a.fetchPost("/v1/client/select",e)},t.d=function(e){return l.a.fetchPost("/v1/clientoperator/loginNameUniqueness",e)};var l=r("vLgD")},DPmy:function(e,t,r){var l=r("lZER");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);r("rjj0")("11380f9c",l,!0)},"I7+L":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("gBtx"),o=r.n(l),n=r("y/rj"),a=r("4hyN"),i={components:{officeSelector:r("8+ep").a},data:function(){var e=this;return{flagUpdate:!1,id:"",flag:0,dialogMapperVisible:!1,provinceTree:[],cityTree:[],countyTree:[],ruleForm:{officeName:"",officeId:""},rules:{officeName:{required:!0,message:"机构名称不允许为空",trigger:"blur"},clientName:{required:!0,message:"企业名称不允许为空",trigger:"blur"},adminName:[{validator:function(t,r,l){""===r&&l(new Error("请输入管理员账号")),2===e.flag&&(e.flagUpdate=!0),Object(a.d)({loginName:r,flag:e.flagUpdate}).then(function(e){e.new?l(new Error("该账号已经被使用")):l()})},trigger:"blur"}]}}},mounted:function(){this.$nextTick(function(){this.id=this.$route.query.id,this.id&&this.load(),this.flag=o()(this.$route.query.flag),this.getAreaData(1,"")})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;1===t.flag?Object(a.c)(t.ruleForm).then(function(e){console.log("ok"),t.$router.push({path:"Client"})}):2===t.flag?Object(a.f)(t.ruleForm).then(function(e){console.log("ok"),t.$router.push({path:"Client"})}):console.log("error submit!!:"+t.flag)})},resetForm:function(e){this.$refs[e].resetFields()},load:function(){var e=this;Object(a.e)({id:this.id}).then(function(t){e.ruleForm=t.new})},getAreaData:function(e,t){var r=this;Object(n.e)({name:t}).then(function(t){1===e?r.provinceTree=t.newList:2===e?r.cityTree=t.newList:(console.log(t.newList),r.countyTree=t.newList)})},onProvinceChange:function(e){console.log(e),this.ruleForm.city="",this.ruleForm.county="",this.getAreaData(2,e)},onCityChange:function(e){console.log(e),this.ruleForm.county="",this.getAreaData(3,e)},selectOffice:function(e){e.treeKey&&(this.ruleForm.officeId=e.treeKey,this.ruleForm.officeName=e.treeValue)}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"维修企业区分与维修门店，一家企业可以拥有多个门店",type:"success"}}),e._v(" "),r("el-row",[r("el-col",{attrs:{span:23}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"机构名称",prop:"officeName"}},[r("officeSelector",{attrs:{officeName:e.ruleForm.officeName},on:{selectSuccess:e.selectOffice}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"企业名称",prop:"clientName"}},[r("el-input",{model:{value:e.ruleForm.clientName,callback:function(t){e.$set(e.ruleForm,"clientName",t)},expression:"ruleForm.clientName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"企业负责人",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.master,callback:function(t){e.$set(e.ruleForm,"master",t)},expression:"ruleForm.master"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"负责人电话",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"地址省",prop:"province"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择省"},on:{change:e.onProvinceChange},model:{value:e.ruleForm.province,callback:function(t){e.$set(e.ruleForm,"province",t)},expression:"ruleForm.province"}},e._l(e.provinceTree,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"地址市",prop:"city"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择市"},on:{change:e.onCityChange},model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}},e._l(e.cityTree,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"地址县",prop:"county"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择县"},model:{value:e.ruleForm.county,callback:function(t){e.$set(e.ruleForm,"county",t)},expression:"ruleForm.county"}},e._l(e.countyTree,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"街道地址"}},[r("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:3}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"base:client:add",expression:"'base:client:add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){e.addT()}}},[e._v("地图选点")])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"adminName",label:"管理员账号"}},[r("el-input",{model:{value:e.ruleForm.adminName,callback:function(t){e.$set(e.ruleForm,"adminName",t)},expression:"ruleForm.adminName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"adminPassword",label:"管理员密码"}},[r("el-input",{model:{value:e.ruleForm.adminPassword,callback:function(t){e.$set(e.ruleForm,"adminPassword",t)},expression:"ruleForm.adminPassword"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1)],1)],1),e._v(" "),0!=e.flag?r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1):e._e()],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"地图",visible:e.dialogMapperVisible},on:{"update:visible":function(t){e.dialogMapperVisible=t}}},[r("div",{staticClass:"XSDFXPage",attrs:{id:"XSDFXPage"}})])],1)},staticRenderFns:[]};var c=r("VU/8")(i,s,!1,function(e){r("DPmy")},"data-v-70a0d64c",null);t.default=c.exports},lZER:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.line[data-v-70a0d64c]{\n  text-align: center;\n}\n",""])}});