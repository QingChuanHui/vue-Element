webpackJsonp([14],{PZQH:function(e,r,t){var l=t("s4uK");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);t("rjj0")("2dd6c2d2",l,!0)},oZ0a:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=t("gBtx"),o=t.n(l),a=t("nITA"),n=t("jdCd"),s=t("y/rj"),i={components:{officeSelector:t("8+ep").a},data:function(){var e=this;return{flagUpdate:!1,id:"",flag:0,provinceTree:[],cityTree:[],countyTree:[],ruleForm:{id:"",name:"",master:"",phone:"",province:"",city:"",county:"",address:"",adminName:"",adminPassword:"",remarks:"",parentId:"",parentName:""},rules:{name:[{required:!0,message:"请输入企业名称",trigger:"blur"},{min:0,max:20,message:"最大 64个字符",trigger:"blur"}],master:[{required:!0,message:"请输入负责人名称",trigger:"blur"},{min:0,max:20,message:"最大 64个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入负责人电话",trigger:"blur"},{min:0,max:20,message:"最大 64个字符",trigger:"blur"}],adminName:[{validator:function(r,t,l){""===t&&l(new Error("请输入管理员账号")),2===e.flag&&(e.flagUpdate=!0),Object(n.g)({loginName:t,flag:e.flagUpdate}).then(function(e){e.new?l(new Error("该账号已经被使用")):l()})},trigger:"blur"}]}}},mounted:function(){this.$nextTick(function(){this.id=this.$route.query.id,this.id&&this.load(),this.flag=o()(this.$route.query.flag),this.getAreaData(1,"")})},methods:{submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;1===r.flag?Object(a.e)(r.ruleForm).then(function(e){console.log("ok"),r.$router.push({path:"/system/Office"})}):2===r.flag?Object(a.f)(r.ruleForm).then(function(e){console.log("ok"),r.$router.push({path:"/system/Office"})}):console.log("error submit!!:"+r.flag)})},resetForm:function(e){this.$refs[e].resetFields()},load:function(){var e=this;Object(a.b)({id:this.id}).then(function(r){console.log("office:"+r.new),e.ruleForm=r.new})},getAreaData:function(e,r){var t=this;Object(s.e)({name:r}).then(function(r){1===e?t.provinceTree=r.newList:2===e?t.cityTree=r.newList:(console.log(r.newList),t.countyTree=r.newList)})},onProvinceChange:function(e){console.log(e),this.ruleForm.city="",this.ruleForm.county="",this.getAreaData(2,e)},onCityChange:function(e){console.log(e),this.ruleForm.county="",this.getAreaData(3,e)},selectOffice:function(e){e.treeKey&&(this.ruleForm.parentId=e.treeKey,this.ruleForm.parentName=e.treeValue)}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"mini"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[t("officeSelector",{attrs:{officeName:e.ruleForm.parentName},on:{selectSuccess:e.selectOffice}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"负责人",prop:"master"}},[t("el-input",{model:{value:e.ruleForm.master,callback:function(r){e.$set(e.ruleForm,"master",r)},expression:"ruleForm.master"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"负责人电话",prop:"phone"}},[t("el-input",{model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"地址省",prop:"province"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择省"},on:{change:e.onProvinceChange},model:{value:e.ruleForm.province,callback:function(r){e.$set(e.ruleForm,"province",r)},expression:"ruleForm.province"}},e._l(e.provinceTree,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"地址市",prop:"city"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择市"},on:{change:e.onCityChange},model:{value:e.ruleForm.city,callback:function(r){e.$set(e.ruleForm,"city",r)},expression:"ruleForm.city"}},e._l(e.cityTree,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"地址县",prop:"county"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择县"},model:{value:e.ruleForm.county,callback:function(r){e.$set(e.ruleForm,"county",r)},expression:"ruleForm.county"}},e._l(e.countyTree,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.name}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{prop:"address",label:"街道地址"}},[t("el-input",{model:{value:e.ruleForm.address,callback:function(r){e.$set(e.ruleForm,"address",r)},expression:"ruleForm.address"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{prop:"adminName",label:"管理员账号"}},[t("el-input",{model:{value:e.ruleForm.adminName,callback:function(r){e.$set(e.ruleForm,"adminName",r)},expression:"ruleForm.adminName"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{prop:"adminPassword",label:"管理员密码"}},[t("el-input",{model:{value:e.ruleForm.adminPassword,callback:function(r){e.$set(e.ruleForm,"adminPassword",r)},expression:"ruleForm.adminPassword"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(r){e.$set(e.ruleForm,"remarks",r)},expression:"ruleForm.remarks"}})],1)],1)],1),e._v(" "),0!=e.flag?t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("重置")])],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var u=t("VU/8")(i,m,!1,function(e){t("PZQH")},"data-v-0b03ac62",null);r.default=u.exports},s4uK:function(e,r,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.line[data-v-0b03ac62]{\n  text-align: center;\n}\n",""])}});